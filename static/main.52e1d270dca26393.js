(()=>{"use strict";var e,t,r,n,o={5114:function(e,t,r){r.d(t,{A:()=>i});var n=r(1601),o=r.n(n),l=r(6314),a=r.n(l)()(o());a.push([e.id,`body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}
`,""]);let i=a},1633:function(e,t,r){var n=r(4848),o=r(5338),l=r(6540),a=r(36),i=r(9680),s=r(1832),u=r(9630),d=r(7572);let c="/resources",m=`${c}/INCLUDE`,h=`${c}/CHANGE`,j=(0,d.VP)(m),x=(0,d.VP)(h),b=e=>{let t=localStorage.getItem(e);return t?JSON.parse(t)||{}:null},p=()=>{let e=b(c);return e||{}},g=(0,d.vy)(p(),e=>{e.addCase(j,(e,t)=>{let{payload:r}=t,n=p();return n[r.id]=r,localStorage.setItem(c,JSON.stringify(n)),n}).addCase(x,(e,t)=>{let{payload:r}=t,n=p();return n[r.resourceId]&&(n[r.resourceId].amount+=r.amount),localStorage.setItem(c,JSON.stringify(n)),n})}),v=e=>e.resource||{},f="/history",y=`${f}/INCLUDE`,S=(0,d.VP)(y),C=()=>{let e=b(f);return e||[]},O=(0,d.vy)(C(),e=>{e.addCase(S,(e,t)=>{let{payload:r}=t,n=[...C(),r];return localStorage.setItem(f,JSON.stringify(n)),n})}),w=e=>e.history||[],I=(0,d.U1)({reducer:{resource:g,history:O}});var k=r(2419),L=r(556),R=r(7696),A=r(3767),B=r(9370);let F=(0,s.styled)("div",{display:"flex",justifyContent:"space-between",alignItems:"baseline"});var M=r(3120);function N(e){let{items:t,onSelect:r,Component:o}=e;return(0,n.jsx)(M.Menu,{items:t,overrides:{Option:{props:{overrides:{ListItem:{component:l.forwardRef((e,t)=>(0,n.jsx)(o,{...e,ref:t,onSelect:r}))}}}}}})}function P(e){let{title:t,items:r,Viewer:o,Item:a}=e,[i,s]=l.useState(null);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.HeadingLevel,{children:(0,n.jsxs)(F,{children:[(0,n.jsx)(A.Heading,{children:t}),(0,n.jsx)(k.Button,{shape:k.SHAPE.circle,onClick:()=>s({}),children:(0,n.jsx)(B.Plus,{})})]})}),(0,n.jsx)(N,{items:r,onSelect:e=>{let{item:t}=e;return s(t)},Component:a}),(0,n.jsx)(R.Modal,{onClose:()=>s(null),closeable:!0,isOpen:!!i,animate:!0,autoFocus:!0,size:R.SIZE.full,role:R.ROLE.dialog,children:(0,n.jsx)(o,{item:i,onClose:()=>s(null)})})]})}var T=r(9138);function E(){let[e,t]=l.useState([]);return(0,n.jsx)(T.FileUploader,{overrides:{ContentMessage:()=>"Load database..."},accept:[".json"],maxSize:1e6,fileRows:e,setFileRows:e=>t(e),processFileOnDrop:e=>new Promise((t,r)=>{let n=new FileReader;n.onload=async()=>{console.log(n.result);let r=JSON.parse(n.result);for(let e in r)[f,c].includes(e)&&localStorage.setItem(e,r[e]);return t({name:e.name,data:n.result}),Promise.resolve()},n.onerror=e=>{console.log("Error reading file:",e),r(e)},n.readAsText(e)})})}var D=r(2467);let H=e=>{let{ref:t,...r}=e,o=(0,a.d4)(v),l=(r.item.resource||[]).map(e=>{let{id:t}=e;return t}).join();return(0,n.jsx)(D.MenuAdapter,{...r,onClick:()=>r.onSelect(r),ref:t,endEnhancer:()=>(0,n.jsx)(B.ChevronRight,{}),children:(0,n.jsx)(D.ListItemLabel,{description:`Total amount: ${r.item.amount}`,children:o[l]?.name||"Not fount"})})},V=e=>{let{ref:t,...r}=e;return(0,n.jsx)(D.MenuAdapter,{...r,onClick:()=>r.onSelect(r),ref:t,endEnhancer:()=>(0,n.jsx)(B.ChevronRight,{}),children:(0,n.jsx)(D.ListItemLabel,{description:`Total amount: ${r.item.amount}`,children:r.item.name})})};var U=r(5135),_=r(2677),K=r(7387),J=r(3213);function q(e){let{item:t,onClose:r}=e,o=(0,a.d4)(v),l=(0,a.wA)(),i=Object.keys(t||{}).length>0,s=i?t:{resource:[],amount:0};return(0,n.jsx)(U.l1,{initialValues:s,validate:e=>{let t={};return e.resource||(t.resource="Required"),e.amount||(t.amount="Required"),t},onSubmit:(e,t)=>{let{setSubmitting:n}=t,o=e.resource.map(e=>{let{id:t}=e;return t}).join(),a={id:new Date().toISOString(),resourceId:o,...e};l(S(a)),l(x(a)),n(!1),r()},children:e=>{let{values:t,errors:l,touched:a,handleChange:s,handleBlur:u,setFieldValue:d,handleSubmit:c,isSubmitting:m}=e;return(0,n.jsxs)("form",{onSubmit:c,children:[(0,n.jsx)(R.ModalHeader,{children:i?"View":"New"}),(0,n.jsxs)(R.ModalBody,{children:[(0,n.jsx)(J.FormControl,{label:"Resouce",children:(0,n.jsx)(K.Select,{options:Object.values(o),placeholder:"Select resource",name:"resource",labelKey:"name",valueKey:"id",onChange:e=>{let{value:t}=e;return d("resource",t)},error:l.resource&&a.resource&&l.resource,onBlur:u,value:t.resource,disabled:i})}),(0,n.jsx)(J.FormControl,{label:"Amount",children:(0,n.jsx)(_.Input,{type:"number",name:"amount",error:l.amount&&a.amount&&l.amount,onChange:s,onBlur:u,value:t.amount,disabled:i})}),i&&(0,n.jsx)(J.FormControl,{label:"Created at",children:(0,n.jsx)(_.Input,{type:"text",name:"id",value:new Date(t.id).toLocaleString(),disabled:i})})]}),(0,n.jsxs)(R.ModalFooter,{children:[(0,n.jsx)(k.Button,{type:"button",kind:k.KIND.tertiary,disabled:m,isLoading:m,onClick:r,children:"Cancel"}),!i&&(0,n.jsx)(k.Button,{type:"submit",disabled:m,isLoading:m,onClick:c,children:"Save"})]})]})}})}function $(e){let{item:t,onClose:r}=e,o=(0,a.wA)(),l=Object.keys(t||{}).length>0,i=l?t:{name:"",amount:""};return(0,n.jsx)(U.l1,{initialValues:i,validate:e=>{let t={};return e.name||(t.name="Required"),e.amount||(t.amount="Required"),t},onSubmit:(e,t)=>{let{setSubmitting:n}=t;o(j({id:new Date().toISOString(),...e})),n(!1),r()},children:e=>{let{values:t,errors:o,touched:a,handleChange:i,handleBlur:s,handleSubmit:u,isSubmitting:d}=e;return(0,n.jsxs)("form",{onSubmit:u,children:[(0,n.jsx)(R.ModalHeader,{children:l?"View":"New"}),(0,n.jsxs)(R.ModalBody,{children:[(0,n.jsx)(J.FormControl,{label:"Name",children:(0,n.jsx)(_.Input,{type:"text",name:"name",error:o.name&&a.name&&o.name,onChange:i,onBlur:s,value:t.name})}),(0,n.jsx)(J.FormControl,{label:"Amount",children:(0,n.jsx)(_.Input,{type:"number",name:"amount",error:o.amount&&a.amount&&o.amount,onChange:i,onBlur:s,value:t.amount,disabled:l})}),l&&(0,n.jsx)(J.FormControl,{label:"Created at",children:(0,n.jsx)(_.Input,{type:"text",name:"id",value:new Date(t.id).toLocaleString(),disabled:l})})]}),(0,n.jsxs)(R.ModalFooter,{children:[(0,n.jsx)(k.Button,{kind:k.KIND.tertiary,disabled:d,isLoading:d,onClick:r,children:"Cancel"}),(0,n.jsx)(k.Button,{type:"submit",disabled:d,isLoading:d,onClick:u,children:"Save"})]})]})}})}function z(){let[e,t]=l.useState("0"),r=(0,a.d4)(v),o=(0,a.d4)(w);return(0,n.jsxs)(L.Tabs,{activeKey:e,onChange:e=>{let{activeKey:r}=e;return t(r)},children:[(0,n.jsx)(L.Tab,{title:"Resources",children:(0,n.jsx)(P,{title:"Resources",items:Object.values(r),Viewer:$,Item:V})}),(0,n.jsx)(L.Tab,{title:"Historic",children:(0,n.jsx)(P,{title:"Historic",items:o||[],Viewer:q,Item:H})}),(0,n.jsxs)(L.Tab,{title:"Setting",children:[(0,n.jsx)(E,{}),(0,n.jsx)("br",{}),(0,n.jsx)(k.Button,{onClick:()=>{var e;let t,r;e=JSON.stringify(Object.keys(localStorage).reduce((e,t)=>({...e,[t]:localStorage.getItem(t)}),{})),t=document.createElement("a"),r=new Blob([e],{type:"text/plain"}),t.href=URL.createObjectURL(r),t.download="database.json",t.click()},children:"Backup"})]})]})}var W=r(5072),G=r.n(W),Z=r(7825),Q=r.n(Z),X=r(7659),Y=r.n(X),ee=r(5056),et=r.n(ee),er=r(540),en=r.n(er),eo=r(1113),el=r.n(eo),ea=r(5114),ei={};ei.styleTagTransform=el(),ei.setAttributes=et(),ei.insert=Y().bind(null,"head"),ei.domAPI=Q(),ei.insertStyleElement=en(),G()(ea.A,ei),ea.A&&ea.A.locals&&ea.A.locals;let es=new i.A,eu=document.getElementById("root");(0,o.createRoot)(eu).render((0,n.jsx)(()=>(0,n.jsx)(s.Provider,{value:es,children:(0,n.jsx)(u.BaseProvider,{theme:u.LightTheme,children:(0,n.jsx)(a.Kq,{store:I,children:(0,n.jsx)(z,{})})})}),{})),"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js")}},l={};function a(e){var t=l[e];if(void 0!==t)return t.exports;var r=l[e]={id:e,exports:{}};return o[e](r,r.exports,a),r.exports}a.m=o,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nc=void 0,e=[],a.O=(t,r,n,o)=>{if(r){o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[r,n,o];return}for(var i=1/0,l=0;l<e.length;l++){for(var[r,n,o]=e[l],s=!0,u=0;u<r.length;u++)(!1&o||i>=o)&&Object.keys(a.O).every(e=>a.O[e](r[u]))?r.splice(u--,1):(s=!1,o<i&&(i=o));if(s){e.splice(l--,1);var d=n();void 0!==d&&(t=d)}}return t},a.rv=()=>"1.5.8",t={889:0},a.O.j=e=>0===t[e],r=(e,r)=>{var n,o,[l,i,s]=r,u=0;if(l.some(e=>0!==t[e])){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(s)var d=s(a)}for(e&&e(r);u<l.length;u++)o=l[u],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(d)},(n=self.webpackChunkresources_manager_app=self.webpackChunkresources_manager_app||[]).forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n)),a.ruid="bundler=rspack@1.5.8";var i=a.O(void 0,["767"],function(){return a(1633)});i=a.O(i)})();