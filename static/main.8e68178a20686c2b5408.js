!function(){var e,t={8488:function(e,t,n){"use strict";var r=n(7294),a=n(3935),l=n(9704),o=n(3419),u=n(7597),i=n(9783),s=n(5985),c=n(5973);const m="/auth",d=`${m}/LOGIN`,f=`${m}/LOGOUT`,E=(0,c.PH)(d),p=(0,c.PH)(f);var b=n(9960),g=e=>{const t=localStorage.getItem(e);return t?JSON.parse(t)||{}:null};const v=()=>g(m)||{user:null,users:null};var h=(0,c.Lq)(v(),(e=>{e.addCase(E,((e,t)=>{const n=t.payload.username.toLowerCase(),r=t.payload.password.toLowerCase(),a=v(),l=(0,b.sign)(n.toLowerCase(),r),o=a.user||{},u=a.users||{};if(u[n]||(u[n]=l),u[n]&&u[n]===l){o.username=n,o.hash=l;const e={users:u,user:o};localStorage.setItem(m,JSON.stringify(e))}return{...e,user:o,errors:{isInvalid:!0}}})).addCase(p,(e=>{const t={...g(m),user:null};return localStorage.setItem(m,JSON.stringify(t)),{...e,user:null,errors:null}}))}));const y=e=>e.auth?.user,S=e=>e.auth?.user?.username,C=e=>e.auth?.errors,O="/resources",w=`${O}/INCLUDE`,Z=`${O}/CHANGE`,I=(0,c.PH)(w),j=(0,c.PH)(Z),k=()=>g(O)||{};var L=(0,c.Lq)(k(),(e=>{e.addCase(I,((e,t)=>{const{payload:n}=t,r=k();return r[n.id]=n,localStorage.setItem(O,JSON.stringify(r)),r})).addCase(j,((e,t)=>{const{payload:n}=t,r=k();return r[n.resourceId]&&(r[n.resourceId].amount+=n.amount),localStorage.setItem(O,JSON.stringify(r)),r}))}));const B=e=>(console.log(e,e.resource),e.resource||{}),x="/history",N=`${x}/INCLUDE`,P=(0,c.PH)(N),R=()=>g(x)||[];var T=(0,c.Lq)(R(),(e=>{e.addCase(P,((e,t)=>{const{payload:n}=t,r=[...R(),n];return localStorage.setItem(x,JSON.stringify(r)),r}))})),F=e=>e.history||[];const J=(0,c.xC)({reducer:{auth:h,resource:L,history:T}});var U=n(9711),H=n(6974),q=n(5877),A=n(1075),V=n(6529),_=n(1203),z=n(649),D=n(2762),M=n(6526),$=(0,u.zo)("div",{display:"flex",justifyContent:"space-between",alignItems:"baseline"}),K=n(6548);function G(){return G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}function W({items:e,onSelect:t,Component:n}){return r.createElement(K.Z,{items:e,overrides:{Option:{props:{overrides:{ListItem:{component:r.forwardRef(((e,a)=>r.createElement(n,G({},e,{ref:a,onSelect:t}))))}}}}}})}function X({title:e,items:t,Viewer:n,Item:a}){const[l,o]=r.useState(null),u=!!l;return r.createElement(r.Fragment,null,r.createElement(z.ZP,null,r.createElement($,null,r.createElement(D.Z,null,e),r.createElement(q.Z,{shape:A.X3.circle,onClick:()=>o({})},r.createElement(M.Z,null)))),r.createElement(W,{items:t,onSelect:({item:e})=>o(e),Component:a}),r.createElement(V.Z,{onClose:()=>o(null),closeable:!0,isOpen:u,animate:!0,autoFocus:!0,size:_.NO.full,role:_.HB.dialog},r.createElement(n,{item:l,onClose:()=>o(null)})))}function Q({children:e}){return(0,l.v9)(y)?e:r.createElement(H.Fg,{to:"/login"})}var Y=n(9625);function ee(){function e(e){const t=JSON.parse(e.target.result);t.forEach((e=>{[m,x,O].includes(e)&&localStorage.setItem(e,t[e])})),window.location.reload()}return r.createElement(Y.Z,{overrides:{ContentMessage:()=>"Load database..."},accept:[".json"],multiple:!1,onDrop:t=>{console.log(t),function(t){const n=new FileReader;n.onload=e,n.readAsText(t[0])}(t)}})}function te(){return(0,l.v9)(y)?r.createElement(H.Fg,{to:"/home"}):r.createElement(H.Fg,{to:"/login"})}var ne=n(8069),re=n(2939),ae=(0,u.zo)("div",{width:"80%",margin:"10% auto 0 auto"}),le=n(1054),oe=n(9207),ue=n(181),ie=({onSubmit:e})=>r.createElement(le.J9,{initialValues:{username:"",password:""},validate:e=>{const t={};return e.username||(t.username="Required"),e.password||(t.password="Required"),t},onSubmit:e},(({values:e,errors:t,touched:n,handleChange:a,handleBlur:l,handleSubmit:o,isSubmitting:u})=>r.createElement("form",{onSubmit:o},r.createElement(ue.Z,{label:"Username"},r.createElement(oe.Z,{type:"text",name:"username",error:t.username&&n.username&&t.username,onChange:a,onBlur:l,value:e.username})),r.createElement(ue.Z,{label:"Password"},r.createElement(oe.Z,{type:"password",name:"password",error:t.password&&n.password&&t.password,onChange:a,onBlur:l,value:e.password})),r.createElement(q.Z,{type:"submit",disabled:u,isLoading:u,onClick:o,overrides:{BaseButton:{style:{width:"100%"}}}},"Submit"))));function se(){const e=(0,l.v9)(y),t=(0,l.v9)(C),n=(0,l.I0)();return e?r.createElement(H.Fg,{to:"/home"}):r.createElement(ae,null,r.createElement("h1",null,"Resources manager"),r.createElement(ie,{onSubmit:(e,{setSubmitting:t})=>{n(E(e)),t(!1)}}),r.createElement("br",null),t&&t.isInvalid&&r.createElement(ne.Z,{kind:re.TO.negative,overrides:{Body:{style:{width:"auto"}}}},"Invalid password"),r.createElement(ee,null))}var ce=n(2038),me=n(7163),de=n(1268),fe=n(3571),Ee=n(825);function pe(){return pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}var be=({ref:e,...t})=>{const n=(0,l.v9)(B),a=(t.item.resource||[]).map((({id:e})=>e)).join();return r.createElement(de.Z,pe({},t,{onClick:()=>t.onSelect(t),ref:e,endEnhancer:()=>r.createElement(Ee.Z,null)}),r.createElement(fe.Z,{description:`Total amount: ${t.item.amount}`},n[a]?.name||"Not fount"))};function ge(){return ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(this,arguments)}var ve=({ref:e,...t})=>r.createElement(de.Z,ge({},t,{onClick:()=>t.onSelect(t),ref:e,endEnhancer:()=>r.createElement(Ee.Z,null)}),r.createElement(fe.Z,{description:`Total amount: ${t.item.amount}`},t.item.name)),he=n(1983),ye=n(1537);function Se({item:e,onClose:t}){const n=(0,l.v9)(S),a=(0,l.v9)(B),o=(0,l.I0)(),u=Object.keys(e||{}).length>0,i=u?e:{resource:[],amount:0};return r.createElement(le.J9,{initialValues:i,validate:e=>{const t={};return e.resource||(t.resource="Required"),e.amount||(t.amount="Required"),t},onSubmit:(e,{setSubmitting:r})=>{const a=e.resource.map((({id:e})=>e)).join(),l={id:(new Date).toISOString(),username:n,resourceId:a,...e};o(P(l)),o(j(l)),r(!1),t()}},(({values:e,errors:n,touched:l,handleChange:o,handleBlur:i,setFieldValue:s,handleSubmit:c,isSubmitting:m})=>r.createElement("form",{onSubmit:c},r.createElement(he.xB,null,u?"View":"New"),r.createElement(he.fe,null,r.createElement(ue.Z,{label:"Resouce"},r.createElement(ye.Z,{options:Object.values(a),placeholder:"Select resource",name:"resource",labelKey:"name",valueKey:"id",onChange:({value:e})=>s("resource",e),error:n.resource&&l.resource&&n.resource,onBlur:i,value:e.resource,disabled:u})),r.createElement(ue.Z,{label:"Amount"},r.createElement(oe.Z,{type:"number",name:"amount",error:n.amount&&l.amount&&n.amount,onChange:o,onBlur:i,value:e.amount,disabled:u})),u&&r.createElement(r.Fragment,null,r.createElement(ue.Z,{label:"Created by"},r.createElement(oe.Z,{type:"text",name:"username",value:e.username,disabled:u})),r.createElement(ue.Z,{label:"Created at"},r.createElement(oe.Z,{type:"text",name:"id",value:new Date(e.id).toLocaleString(),disabled:u})))),r.createElement(he.mz,null,r.createElement(q.Z,{type:"button",kind:A.TO.tertiary,disabled:m,isLoading:m,onClick:t},"Cancel"),!u&&r.createElement(q.Z,{type:"submit",disabled:m,isLoading:m,onClick:c},"Save")))))}function Ce({item:e,onClose:t}){const n=(0,l.v9)(S),a=(0,l.I0)(),o=Object.keys(e||{}).length>0,u=o?e:{name:"",amount:""};return r.createElement(le.J9,{initialValues:u,validate:e=>{const t={};return e.name||(t.name="Required"),e.amount||(t.amount="Required"),t},onSubmit:(e,{setSubmitting:r})=>{const l={id:(new Date).toISOString(),username:n,...e};a(I(l)),r(!1),t()}},(({values:e,errors:n,touched:a,handleChange:l,handleBlur:u,handleSubmit:i,isSubmitting:s})=>r.createElement("form",{onSubmit:i},r.createElement(he.xB,null,o?"View":"New"),r.createElement(he.fe,null,r.createElement(ue.Z,{label:"Name"},r.createElement(oe.Z,{type:"text",name:"name",error:n.name&&a.name&&n.name,onChange:l,onBlur:u,value:e.name})),r.createElement(ue.Z,{label:"Amount"},r.createElement(oe.Z,{type:"number",name:"amount",error:n.amount&&a.amount&&n.amount,onChange:l,onBlur:u,value:e.amount,disabled:o})),o&&r.createElement(r.Fragment,null,r.createElement(ue.Z,{label:"Created by"},r.createElement(oe.Z,{type:"text",name:"username",value:e.username,disabled:o})),r.createElement(ue.Z,{label:"Created at"},r.createElement(oe.Z,{type:"text",name:"id",value:new Date(e.id).toLocaleString(),disabled:o})))),r.createElement(he.mz,null,r.createElement(q.Z,{kind:A.TO.tertiary,disabled:s,isLoading:s,onClick:t},"Cancel"),r.createElement(q.Z,{type:"submit",disabled:s,isLoading:s,onClick:i},"Save")))))}function Oe(){const[e,t]=r.useState("0"),n=(0,l.v9)(B),a=(0,l.v9)(F),o=(0,l.I0)();return r.createElement(ce.m,{activeKey:e,onChange:({activeKey:e})=>t(e)},r.createElement(me.O,{title:"Resources"},r.createElement(X,{title:"Resources",items:Object.values(n),Viewer:Ce,Item:ve})),r.createElement(me.O,{title:"Historic"},r.createElement(X,{title:"Historic",items:a||[],Viewer:Se,Item:be})),r.createElement(me.O,{title:"Setting"},r.createElement(ee,null),r.createElement("br",null),r.createElement(q.Z,{onClick:()=>(()=>{const e=Object.keys(localStorage).reduce(((e,t)=>({...e,[t]:localStorage.getItem(t)})),{});!function(e,t,n){const r=document.createElement("a"),a=new Blob([e],{type:"text/plain"});r.href=URL.createObjectURL(a),r.download="database.json",r.click()}(JSON.stringify(e))})()},"Backup"),r.createElement("br",null),r.createElement("br",null),r.createElement(q.Z,{onClick:()=>o(p())},"Logoff")))}var we=n(4155);function Ze(){return r.createElement(U.UT,{basename:we.env.PUBLIC_URL},r.createElement(H.Z5,null,r.createElement(H.AW,{path:"/",element:r.createElement(te,null)}),r.createElement(H.AW,{path:"/login",element:r.createElement(se,null)}),r.createElement(H.AW,{path:"/home",element:r.createElement(Q,null,r.createElement(Oe,null))})))}var Ie=n(3379),je=n.n(Ie),ke=n(7795),Le=n.n(ke),Be=n(569),xe=n.n(Be),Ne=n(3565),Pe=n.n(Ne),Re=n(9216),Te=n.n(Re),Fe=n(4589),Je=n.n(Fe),Ue=n(7393),He={};He.styleTagTransform=Je(),He.setAttributes=Pe(),He.insert=xe().bind(null,"head"),He.domAPI=Le(),He.insertStyleElement=Te(),je()(Ue.Z,He),Ue.Z&&Ue.Z.locals&&Ue.Z.locals;const qe=new o.K;a.render(r.createElement(r.StrictMode,null,r.createElement(u.zt,{value:qe},r.createElement(i.Z,{theme:s.i},r.createElement(l.zt,{store:J},r.createElement(Ze,null))))),document.getElementById("root"))},7393:function(e,t,n){"use strict";var r=n(8081),a=n.n(r),l=n(3645),o=n.n(l)()(a());o.push([e.id,"body {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n    monospace;\n}\n",""]),o.locals={},t.Z=o},6601:function(){},1922:function(){},2363:function(){},2361:function(){},4616:function(){}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var l=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(l.exports,l,l.exports,r),l.loaded=!0,l.exports}r.m=t,e=[],r.O=function(t,n,a,l){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],a=e[c][1],l=e[c][2];for(var u=!0,i=0;i<n.length;i++)(!1&l||o>=l)&&Object.keys(r.O).every((function(e){return r.O[e](n[i])}))?n.splice(i--,1):(u=!1,l<o&&(o=l));if(u){e.splice(c--,1);var s=a();void 0!==s&&(t=s)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[n,a,l]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e={179:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,l,o=n[0],u=n[1],i=n[2],s=0;if(o.some((function(t){return 0!==e[t]}))){for(a in u)r.o(u,a)&&(r.m[a]=u[a]);if(i)var c=i(r)}for(t&&t(n);s<o.length;s++)l=o[s],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(c)},n=self.webpackChunkresources_manager_app=self.webpackChunkresources_manager_app||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var a=r.O(void 0,[326],(function(){return r(8488)}));a=r.O(a)}();